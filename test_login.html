<!DOCTYPE html>
<html>
<head>
    <title>로그인 테스트</title>
</head>
<body>
    <h1>간단 로그인 테스트</h1>
    <button onclick="testLogin()">로그인 테스트</button>
    <div id="result"></div>

    <script>
    async function testLogin() {
        try {
            const response = await fetch('http://localhost:8000/api/auth/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    site_id: 'admin',
                    password: '123456'
                })
            });
            
            const data = await response.json();
            console.log('응답:', data);
            
            if (response.ok) {
                document.getElementById('result').innerHTML = `
                    <h3>로그인 성공!</h3>
                    <p>토큰: ${data.access_token?.substring(0, 50)}...</p>
                    <p>쿠키 설정 중...</p>
                `;
                
                // 쿠키 설정
                document.cookie = `auth_token=${data.access_token}; path=/; max-age=3600`;
                console.log('쿠키 설정됨:', document.cookie);
            } else {
                document.getElementById('result').innerHTML = `
                    <h3>로그인 실패</h3>
                    <p>${JSON.stringify(data)}</p>
                `;
            }
        } catch (error) {
            console.error('에러:', error);
            document.getElementById('result').innerHTML = `
                <h3>네트워크 에러</h3>
                <p>${error.message}</p>
            `;
        }
    }
    </script>
</body>
</html>
